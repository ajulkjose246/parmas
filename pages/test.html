<form id="user-form">
  <div id="user-list">
    <div class="user">
      <input type="text" name="name[]" placeholder="Name" required />
      <input type="email" name="email[]" placeholder="Email" required />
      <button type="button" class="remove-user-btn">Remove</button>
    </div>
  </div>
  <button type="button" id="add-user-btn">Add User</button>
  <button type="submit" id="submit-btn" disabled>Submit</button>
</form>
<script>
  const addUserBtn = document.getElementById("add-user-btn");
  const userList = document.getElementById("user-list");
  const submitBtn = document.getElementById("submit-btn");

  // Add event listener to the "Add User" button
  addUserBtn.addEventListener("click", addUser);

  // Add event listener to the user form for validation
  document
  
    .getElementById("user-form")
    .addEventListener("input", validateUserForm);

  // Function to add a new user row to the form
  function addUser() {
    // Create new user div
    const newUserDiv = document.createElement("div");
    newUserDiv.classList.add("user");

    // Create name input field
    const nameInput = document.createElement("input");
    nameInput.type = "text";
    nameInput.name = "name[]";
    nameInput.placeholder = "Name";
    nameInput.required = true;

    // Create email input field
    const emailInput = document.createElement("input");
    emailInput.type = "email";
    emailInput.name = "email[]";
    emailInput.placeholder = "Email";
    emailInput.required = true;

    // Create remove button
    const removeUserBtn = document.createElement("button");
    removeUserBtn.type = "button";
    removeUserBtn.classList.add("remove-user-btn");
    removeUserBtn.textContent = "Remove";
    removeUserBtn.addEventListener("click", () => {
      userList.removeChild(newUserDiv);
      validateUserForm();
    });

    // Add input fields and remove button to new user div
    newUserDiv.appendChild(nameInput);
    newUserDiv.appendChild(emailInput);
    newUserDiv.appendChild(removeUserBtn);

    // Add new user div to user list
    userList.appendChild(newUserDiv);

    // Validate user form
    validateUserForm();
  }

  // Function to validate the user form and enable/disable the submit button
  function validateUserForm() {
    const valid = Array.from(userList.children).every((user) => {
      const nameInput = user.querySelector("input[name='name[]']");
      const emailInput = user.querySelector("input[name='email[]']");
      return nameInput.checkValidity() && emailInput.checkValidity();
    });

    submitBtn.disabled = !valid;
  }
</script>
